<!DOCTYPE html>
<html>
<head>
<style>
body, html {
  height: 100%;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #000000;
  color: #ff3300
}

table, th, td {
  border: 5px "#ff3300";
  border-collapse: collapse;
}
th, td {
  padding: 15px;
  text-align: left;
}
table#t01 {
  width: 100%;    
  background-color: powderblue;
}
</style>
</head>


<body>

<div id="demo">
  <CENTER><h1>Green Woods Farms </h1>
  <h4>Bangalore</h4> </CENTER>
</div>


<script>

function ResetTrip()
{
   var xhttp = new XMLHttpRequest();
   var resp;
   xhttp.onreadystatechange = function() 
   {
      if (this.readyState == 4 && this.status == 200) 
      {
           resp = this.responseText;
      }
   };
   xhttp.open("POST", "resettrip", true);
   xhttp.send();
}
function Reset()
{
   var xhttp = new XMLHttpRequest();
   var resp;
   xhttp.onreadystatechange = function() 
   {
      if (this.readyState == 4 && this.status == 200) 
      {
           resp = this.responseText;
      }
   };
   xhttp.open("POST", "reset", true);
   xhttp.send();
}

function SetDate()
{
   var xhttp = new XMLHttpRequest();
   var resp;
   var x ;
   var data = new FormData();
   //var datestr = new Date();
   var datestr = 'hello date';
   datestr = document.getElementById("id1").value; 
   //data.append('ctime', 'Hello');
   data.append('ctime', datestr);
   //data.append('cdata', 'password');
   //data.append('organization', 'place');
   //data.append('requiredkey', 'key');

   xhttp.onreadystatechange = function()
   {
      if (this.readyState == 4 && this.status == 200)
      {
           resp = this.responseText;
      }
   };
   xhttp.open("PUT", "setdate", true);
   xhttp.send(data);
}

function SetTime()
{
   var xhttp = new XMLHttpRequest();
   var resp;
   var x ;
   var data = new FormData();
   //var datestr = new Date();
   var datestr = 'hello date';
   datestr = document.getElementById("id2").value;
   //data.append('ctime', 'Hello');
   data.append('ctime', datestr);

   xhttp.onreadystatechange = function()
   {
      if (this.readyState == 4 && this.status == 200)
      {
           resp = this.responseText;
      }
   };
   xhttp.open("PUT", "settime", true);
   xhttp.send(data);
}

function loop()
{
   var xhttp = new XMLHttpRequest();
   today = new Date() ;
   time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
   currentTime    = time ;
   xhttp.onreadystatechange = function() 
   {
      if (this.readyState == 4 && this.status == 200)
      {

         var jsonObject  = JSON.parse(this.responseText );
         motorStatus     = jsonObject.MotorStatus;
         amps            = jsonObject.Amps;
         temperatureC     = jsonObject.Temperature;
         humidity        = jsonObject.Humidity;
         rainStatus      = jsonObject.Raining;
         soilMoisture    = jsonObject.SoilMoisture;
         waterFlow       = jsonObject.WaterFlow;
         windSpeed       = jsonObject.WindSpeed ;
      }

   };

   xhttp.open("POST", "getUpdate", true);
   xhttp.send();



   var str = "Motor Status: "+ motorStatus;
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('motorstatus').innerHTML = str;
   
   var str = "Ampere: "+ amps.toString();
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('amps').innerHTML = str;


   var str = "Temperature: "+ temperatureC.toString();
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('temperature').innerHTML = str;

   str = "Humidity: "+ humidity.toString();
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('humidity').innerHTML = str;

   str = "Rain: "+ rainStatus;
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('rainstatus').innerHTML = str;
   
   str = "Soil Moisture: "+ soilMoisture.toString();
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('soilMoisture').innerHTML = str;
   
   str = "Flow Rate: "+ waterFlow.toString();
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('flowRate').innerHTML = str;

   str = "Wind speed: "+ windSpeed.toString()
   str = str.fontsize(4); // sets size of the text to 6
   //str = str.fontcolor("#006400"); // sets color of the text to #006400
   str = str.bold(); // makes text bold
   document.getElementById('windSpeed').innerHTML = str;
   
   mystartup();

}
function mystartup(){
    setTimeout(function(){ loop(); }, 1000);

}



var kickstart     = new mystartup();
var motorStatus     = "Not Running" ;
var amps            = 0 ;
var temperatureC     = 0 ;
var humidity        = 0 ;
var rainStatus      = "Not Raining" ;
var soilMoisture    = 0 ;
var waterFlow       = 0 ;
var windSpeed       = 0;
var fontSize      = 6;

var today         = new Date();
var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
var currentTime   = time;

</script>

<head>
<style>
body, html {
  height: 100%;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #000000;
  color: #ff3300
}

table, th, td {
  border: 5px "#ff3300";
  border-collapse: collapse;
}
th, td {
  padding: 15px;
  text-align: left;
}
table#t01 {
  width: 100%;
  background-color: powderblue;
}
        
</style>
</head>

<table border="5">
<TR> 
   <Td> <div id="motorstatus"></div> </td>
   <Td> <div id="amps"></div> </td>
</TR>
<TR> 
   <Td> <div id="temperature"></div> </td>
   <Td> <div id="humidity"></div> </td>
</TR>
<TR> 
   <Td> <div id="rainstatus"></div> </td>
   <Td> <div id="soilMoisture"></div> </td>
</TR>
<TR> 
   <Td> <div id="flowRate"></div> </td>
   <Td> <div id="windSpeed"></div> </td>
</TR>

</table>
<hr>


</body>
</html>
